---
description: "機能実装のためのタスクリストテンプレート"
---

# タスク: [機能名]

**入力**: `/specs/[###-feature-name]/` からの設計ドキュメント
**前提条件**: plan.md (必須), spec.md (ユーザーストーリーに必須), research.md, data-model.md, contracts/

**テスト**: 以下の例にはテストタスクが含まれています。テストは**オプション**です - 機能仕様で明示的に要求された場合のみ含めてください。

**構成**: タスクは、各ストーリーの独立した実装とテストを可能にするために、ユーザーストーリーごとにグループ化されています。

## フォーマット: `[ID] [P?] [Story] 説明`

- **[P]**: 並行して実行可能 (異なるファイル、依存関係なし)
- **[Story]**: このタスクが属するユーザーストーリー (例: US1, US2, US3)
- 説明には正確なファイルパスを含める

## パス規則

- **単一プロジェクト**: リポジトリルートの `src/`, `tests/`
- **Webアプリ**: `backend/src/`, `frontend/src/`
- **モバイル**: `api/src/`, `ios/src/` または `android/src/`
- 以下に示すパスは単一プロジェクトを想定しています - plan.md の構造に基づいて調整してください

<!-- 
  ============================================================================
  重要: 以下のタスクは、説明のみを目的とした「サンプルタスク」です。
  
  /speckit.tasks コマンドは、以下に基づいてこれらを実際のタスクに置き換える必要があります:
  - spec.md からのユーザーストーリー (優先順位 P1, P2, P3... 付き)
  - plan.md からの機能要件
  - data-model.md からのエンティティ
  - contracts/ からのエンドポイント
  
  タスクはユーザーストーリーごとに整理し、各ストーリーが以下のようになるようにする必要があります:
  - 独立して実装可能
  - 独立してテスト可能
  - MVP増分として提供可能
  
  生成された tasks.md ファイルにこれらのサンプルタスクを残さないでください。
  ============================================================================
-->

## フェーズ 1: セットアップ (共有インフラストラクチャ)

**目的**: プロジェクトの初期化と基本構造

- [ ] T001 実装計画に従ってプロジェクト構造を作成する
- [ ] T002 [フレームワーク] 依存関係を持つ [言語] プロジェクトを初期化する
- [ ] T003 [P] リンティングおよびフォーマットツールを設定する

---

## フェーズ 2: 基礎 (ブロッキング前提条件)

**目的**: **すべての**ユーザーストーリーを実装する前に完了しなければならないコアインフラストラクチャ

**⚠️ 重要**: このフェーズが完了するまで、ユーザーストーリーの作業は開始できません

基礎タスクの例 (プロジェクトに合わせて調整):

- [ ] T004 データベーススキーマとマイグレーションフレームワークをセットアップする
- [ ] T005 [P] 認証/認可フレームワークを実装する
- [ ] T006 [P] APIルーティングとミドルウェア構造をセットアップする
- [ ] T007 すべてのストーリーが依存するベースモデル/エンティティを作成する
- [ ] T008 エラー処理とロギングインフラストラクチャを設定する
- [ ] T009 環境設定管理をセットアップする

**チェックポイント**: 基礎準備完了 - ユーザーストーリーの実装を並行して開始できます

---

## フェーズ 3: ユーザーストーリー 1 - [タイトル] (優先度: P1) 🎯 MVP

**ゴール**: [このストーリーが提供するものの簡単な説明]

**独立したテスト**: [このストーリーがそれ自体で機能することを検証する方法]

### ユーザーストーリー 1 のテスト (オプション - テストが要求された場合のみ) ⚠️

> **注: これらのテストを「最初に」書き、実装前に失敗することを確認してください**

- [ ] T010 [P] [US1] tests/contract/test_[name].py で [エンドポイント] のコントラクトテストを作成
- [ ] T011 [P] [US1] tests/integration/test_[name].py で [ユーザージャーニー] の統合テストを作成

### ユーザーストーリー 1 の実装

- [ ] T012 [P] [US1] src/models/[entity1].py に [Entity1] モデルを作成
- [ ] T013 [P] [US1] src/models/[entity2].py に [Entity2] モデルを作成
- [ ] T014 [US1] src/services/[service].py に [Service] を実装 (T012, T013 に依存)
- [ ] T015 [US1] src/[location]/[file].py に [エンドポイント/機能] を実装
- [ ] T016 [US1] バリデーションとエラー処理を追加
- [ ] T017 [US1] ユーザーストーリー 1 の操作に対するロギングを追加

**チェックポイント**: この時点で、ユーザーストーリー 1 は完全に機能し、独立してテスト可能である必要があります

---

## フェーズ 4: ユーザーストーリー 2 - [タイトル] (優先度: P2)

**ゴール**: [このストーリーが提供するものの簡単な説明]

**独立したテスト**: [このストーリーがそれ自体で機能することを検証する方法]

### ユーザーストーリー 2 のテスト (オプション - テストが要求された場合のみ) ⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].py で [エンドポイント] のコントラクトテストを作成
- [ ] T019 [P] [US2] tests/integration/test_[name].py で [ユーザージャーニー] の統合テストを作成

### ユーザーストーリー 2 の実装

- [ ] T020 [P] [US2] src/models/[entity].py に [Entity] モデルを作成
- [ ] T021 [US2] src/services/[service].py に [Service] を実装
- [ ] T022 [US2] src/[location]/[file].py に [エンドポイント/機能] を実装
- [ ] T023 [US2] ユーザーストーリー 1 のコンポーネントと統合 (必要な場合)

**チェックポイント**: この時点で、ユーザーストーリー 1 **および** 2 の両方が独立して動作する必要があります

---

## フェーズ 5: ユーザーストーリー 3 - [タイトル] (優先度: P3)

**ゴール**: [このストーリーが提供するものの簡単な説明]

**独立したテスト**: [このストーリーがそれ自体で機能することを検証する方法]

### ユーザーストーリー 3 のテスト (オプション - テストが要求された場合のみ) ⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].py で [エンドポイント] のコントラクトテストを作成
- [ ] T025 [P] [US3] tests/integration/test_[name].py で [ユーザージャーニー] の統合テストを作成

### ユーザーストーリー 3 の実装

- [ ] T026 [P] [US3] src/models/[entity].py に [Entity] モデルを作成
- [ ] T027 [US3] src/services/[service].py に [Service] を実装
- [ ] T028 [US3] src/[location]/[file].py に [エンドポイント/機能] を実装

**チェックポイント**: すべてのユーザーストーリーが独立して機能するはずです

---

[必要に応じて、同じパターンに従ってユーザーストーリーフェーズを追加]

---

## フェーズ N: 仕上げ & 横断的な関心事

**目的**: 複数のユーザーストーリーに影響する改善

- [ ] TXXX [P] docs/ のドキュメント更新
- [ ] TXXX コードのクリーンアップとリファクタリング
- [ ] TXXX 全ストーリーにわたるパフォーマンス最適化
- [ ] TXXX [P] 追加のユニットテスト (要求された場合) tests/unit/
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.md バリデーションの実行

---

## 依存関係と実行順序

### フェーズの依存関係

- **セットアップ (フェーズ 1)**: 依存関係なし - すぐに開始可能
- **基礎 (フェーズ 2)**: セットアップ完了に依存 - すべてのユーザーストーリーをブロック
- **ユーザーストーリー (フェーズ 3+)**: すべて基礎フェーズの完了に依存
  - ユーザーストーリーは並行して進行可能 (人員がいる場合)
  - または優先順位順 (P1 → P2 → P3)
- **仕上げ (最終フェーズ)**: すべての希望するユーザーストーリーの完了に依存

### ユーザーストーリーの依存関係

- **ユーザーストーリー 1 (P1)**: 基礎 (フェーズ 2) 後に開始可能 - 他のストーリーへの依存なし
- **ユーザーストーリー 2 (P2)**: 基礎 (フェーズ 2) 後に開始可能 - US1 と統合する場合があるが、独立してテスト可能であるべき
- **ユーザーストーリー 3 (P3)**: 基礎 (フェーズ 2) 後に開始可能 - US1/US2 と統合する場合があるが、独立してテスト可能であるべき

### 各ユーザーストーリー内

- テスト (含まれる場合) は実装前に記述し、失敗しなければならない (MUST)
- サービスより前にモデル
- エンドポイントより前にサービス
- 統合より前にコア実装
- 次の優先順位に進む前にストーリー完了

### 並行作業の機会

- [P] マークの付いたすべてのセットアップタスクは並行して実行可能
- [P] マークの付いたすべての基礎タスクは並行して実行可能 (フェーズ 2 内)
- 基礎フェーズが完了したら、すべてのユーザーストーリーを並行して開始可能 (チームのキャパシティが許せば)
- [P] マークの付いたユーザーストーリーのすべてのテストは並行して実行可能
- ストーリー内の [P] マークの付いたモデルは並行して実行可能
- 異なるユーザーストーリーは、異なるチームメンバーによって並行して作業可能

---

## 並行作業の例: ユーザーストーリー 1

```bash
# ユーザーストーリー 1 のすべてのテストを一緒に起動 (テストが要求された場合):
Task: "tests/contract/test_[name].py で [エンドポイント] のコントラクトテストを作成"
Task: "tests/integration/test_[name].py で [ユーザージャーニー] の統合テストを作成"

# ユーザーストーリー 1 のすべてのモデルを一緒に起動:
Task: "src/models/[entity1].py に [Entity1] モデルを作成"
Task: "src/models/[entity2].py に [Entity2] モデルを作成"
```

---

## 実装戦略

### MVP ファースト (ユーザーストーリー 1 のみ)

1. フェーズ 1 完了: セットアップ
2. フェーズ 2 完了: 基礎 (重要 - 全ストーリーをブロック)
3. フェーズ 3 完了: ユーザーストーリー 1
4. **停止して検証**: ユーザーストーリー 1 を独立してテスト
5. 準備ができたらデプロイ/デモ

### 増分デリバリー

1. セットアップ + 基礎 完了 → 基礎準備完了
2. ユーザーストーリー 1 追加 → 独立してテスト → デプロイ/デモ (MVP!)
3. ユーザーストーリー 2 追加 → 独立してテスト → デプロイ/デモ
4. ユーザーストーリー 3 追加 → 独立してテスト → デプロイ/デモ
5. 各ストーリーは、以前のストーリーを壊すことなく価値を追加する

### 並行チーム戦略

複数の開発者がいる場合:

1. チームはセットアップ + 基礎を一緒に完了する
2. 基礎が完了したら:
   - 開発者 A: ユーザーストーリー 1
   - 開発者 B: ユーザーストーリー 2
   - 開発者 C: ユーザーストーリー 3
3. ストーリーは独立して完了し、統合される

---

## 備考

- [P] タスク = 異なるファイル、依存関係なし
- [Story] ラベルは、トレーサビリティのためにタスクを特定のユーザーストーリーにマップします
- 各ユーザーストーリーは、独立して完了可能かつテスト可能でなければなりません
- 実装前にテストが失敗することを確認してください
- 各タスクまたは論理グループの後にコミットしてください
- 任意のチェックポイントで停止して、ストーリーを独立して検証してください
- 回避: 曖昧なタスク、同じファイルの競合、独立性を損なうストーリー間の依存関係
