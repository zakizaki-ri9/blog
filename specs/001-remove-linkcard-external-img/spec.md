# 機能仕様: LinkCard 外部画像参照の削除

**機能ブランチ**: `001-remove-linkcard-external-img`  
**作成日**: 2026-01-12  
**ステータス**: ドラフト  
**入力**: ユーザー記述: "LinkCard の画像URLが外部サーバーに向けられていることがあるため、画像参照をやめる"

## ユーザーシナリオとテスト *(必須)*

### ユーザーストーリー 1 - 外部画像読み込みの停止 (優先度: P1)

ブログの読者が記事を閲覧する際、記事内に含まれる `LinkCard` コンポーネントは、外部サーバー（リンク先など）から画像を読み込まずに表示される。

**優先度の理由**: 外部サーバーへのリクエストを排除することで、プライバシー保護、パフォーマンス向上、およびリンク切れによる表示崩れを防ぐため。これが本機能の核心である。

**独立したテスト**:
- `LinkCard` を含むページをブラウザで開き、ネットワークタブを確認することで独立してテスト可能。
- 外部ドメインへの画像リクエストが発生していないことを確認する。

**受け入れシナリオ**:

1. **Given** 外部サイトへのリンクを含む `LinkCard` が配置された記事ページがある, **When** ユーザーがそのページを開く, **Then** `LinkCard` は表示されるが、外部 URL をソースとする画像は表示されず、外部への画像リクエストも発生しない。
2. **Given** 画像が表示されない状態の `LinkCard`, **When** ユーザーがページを見る, **Then** レイアウトが崩れておらず、テキスト情報（タイトル、説明文など）が適切に読める状態である。

---

### エッジケース

- **ファビコンの扱い**: `LinkCard` は現在ファビコンも表示しているが、これも「画像URL」に含まれるため削除すべきか？ [NEEDS CLARIFICATION: ファビコンも削除しますか？]
- **画像領域の表示**: 画像を表示しない場合、その領域を完全に詰める（テキストのみにする）か、デフォルトのプレースホルダーアイコンを表示するか？ [NEEDS CLARIFICATION: 画像領域を削除しますか、それともプレースホルダーを表示しますか？]
- 内部リンク（同ドメイン内）の画像を参照している `LinkCard` がある場合、それも削除対象とするか？
  - 今回の要件は「外部サーバー」への懸念であるため、技術的に判別可能であれば内部画像は維持する方向性も考えられるが、実装コストとのトレードオフになる。デフォルトは「すべての画像表示を削除」とする。

## 要件 *(必須)*

### 機能要件

- **FR-001**: `LinkCard` コンポーネントは、外部ドメインの URL を持つ画像を `img` タグとしてレンダリングしてはならない (MUST)。
- **FR-002**: `LinkCard` のレイアウトは、画像が表示されない状態でも視覚的に整合性が保たれていなければならない (MUST)。
- **FR-003**: 既存の記事コンテンツ（MDXなど）を変更することなく、コンポーネント側の変更のみでこれを達成しなければならない (MUST)。

### 主要エンティティ

- **LinkCard Component**: ブログ記事内で外部リンクを表示するための UI コンポーネント。現在は `href`, `title`, `image` (URL) 等のプロパティを持つと想定される。

## 成功基準 *(必須)*

### 測定可能な成果

- **SC-001**: `LinkCard` を含むページのロード時、`LinkCard` 起因のクロスオリジン画像リクエスト数が 0 になる。
- **SC-002**: `LinkCard` コンポーネントのレンダリングにおいて、外部 URL が `src` 属性に含まれる `img` タグが存在しないことが単体テストで検証できる。
- **SC-003**: 既存のブログ記事（`LinkCard` を使用しているもの）の 100% が、ビルドエラーや実行時エラーなく表示できる。