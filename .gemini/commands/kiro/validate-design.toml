description = "インタラクティブな技術設計品質レビューと検証"
prompt = """
<meta>
description: インタラクティブな技術設計品質レビューと検証
argument-hint: <feature-name:$1>
arguments: {{args}}
</meta>

# 技術設計検証 (Technical Design Validation)

<background_information>
- **ミッション**: 実装への準備ができているか確認するために、技術設計のインタラクティブな品質レビューを実施する
- **成功基準**:
  - 重要な問題が特定される（最大3つの最も重要な懸念）
  - 強みが認識されたバランスの取れた評価
  - 根拠を伴う明確な GO/NO-GO 決定
  - 必要に応じて改善のためのアクション可能なフィードバック
</background_information>

<instructions>
## コアタスク
承認された要件と設計ドキュメントに基づいて、機能 **$1** のインタラクティブな設計品質レビューを行う。

## 実行ステップ

1. **コンテキストのロード**:
   - 言語とメタデータのために `.kiro/specs/$1/spec.json` を読み込む
   - 要件のために `.kiro/specs/$1/requirements.md` を読み込む
   - 設計ドキュメントのために `.kiro/specs/$1/design.md` を読み込む
   - **すべてのステアリングコンテキストをロード**: `.kiro/steering/` ディレクトリ全体を読み込む:
     - デフォルトファイル: `structure.md`, `tech.md`, `product.md`
     - すべてのカスタムステアリングファイル（モード設定に関わらず）
     - これにより完全なプロジェクトメモリとコンテキストが提供される

2. **レビューガイドラインの読み込み**:
   - レビュー基準とプロセスのために `.kiro/settings/rules/design-review.md` を読み込む

3. **設計レビューの実行**:
   - design-review.md プロセスに従う: 分析 → 重要な問題 → 強み → GO/NO-GO
   - 最も重要な3つの懸念事項に限定する
   - ユーザーとインタラクティブに関わる
   - 出力には spec.json で指定された言語を使用する

4. **決定と次のステップの提供**:
   - 根拠を伴う明確な GO/NO-GO 決定
   - 決定に基づいて進め方をユーザーに案内する

## 重要な制約
- **完璧さの追求ではなく品質保証**: 許容可能なリスクを受け入れる
- **重要な焦点のみ**: 最大3つの問題、成功に著しく影響するもののみ
- **インタラクティブなアプローチ**: 一方的な評価ではなく対話を行う
- **バランスの取れた評価**: 強みと弱みの両方を認識する
- **アクション可能なフィードバック**: すべての提案は実装可能でなければならない
</instructions>

## ツールガイダンス
- **Read first**: レビュー前にすべてのコンテキスト（仕様、ステアリング、ルール）をロードする
- **Grep if needed**: パターン検証または統合チェックのためにコードベースを検索する
- **Interactive**: レビュープロセス全体を通してユーザーと関わる

## 出力記述
spec.json で指定された言語で以下を提供する:

1. **レビュー要約**: 設計品質と準備状況の短い概要（2〜3文）
2. **重要な問題**: 最大3つ、design-review.md フォーマットに従う
3. **設計の強み**: 1〜2のポジティブな側面
4. **最終評価**: 根拠と次のステップを伴う GO/NO-GO 決定

**フォーマット要件**:
- 明確さのためにMarkdown見出しを使用する
- design-review.md 出力フォーマットに従う
- 要約を簡潔に保つ

## 安全性とフォールバック

### エラーシナリオ
- **設計欠落**: design.md が存在しない場合、「最初に設計ドキュメントを生成するために `/kiro:spec-design $1` を実行してください」というメッセージと共に停止する
- **設計未生成**: spec.json で設計フェーズが生成済みとしてマークされていない場合、警告するがレビューを進める
- **ステアリングディレクトリ空**: プロジェクトコンテキストが欠落しておりレビュー品質に影響する可能性があることをユーザーに警告する
- **言語未定義**: spec.json で言語が指定されていない場合、英語 (`en`) をデフォルトとする

### 次のフェーズ: タスク生成

**設計が検証に合格した場合 (GO 決定)**:
- フィードバックをレビューし、必要に応じて変更を適用する
- 実装タスクを生成するために `/kiro:spec-tasks $1` を実行する
- または、自動承認して直接進むために `/kiro:spec-tasks $1 -y` を実行する

**設計に修正が必要な場合 (NO-GO 決定)**:
- 特定された重要な問題に対処する
- 改善を加えて `/kiro:spec-design $1` を再実行する
- `/kiro:validate-design $1` で再検証する

**ノート**: 設計検証は推奨されるが任意である。品質レビューは問題を早期に発見するのに役立つ。

arguments: {{args}}
"""