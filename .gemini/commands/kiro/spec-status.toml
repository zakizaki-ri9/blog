description = "仕様書のステータスと進捗を表示する"
prompt = """
<meta>
description: 仕様書のステータスと進捗を表示する
argument-hint: <feature-name:$1>
arguments: {{args}}
</meta>

# 仕様ステータス (Specification Status)

<background_information>
- **ミッション**: 仕様書の包括的なステータスと進捗を表示する
- **成功基準**:
  - 現在のフェーズと完了ステータスを表示する
  - 次のアクションとブロッカーを特定する
  - 進捗に対する明確な可視性を提供する
</background_information>

<instructions>
## コアタスク
全フェーズにわたる進捗を示す、機能 **$1** のステータスレポートを生成する。

## 実行ステップ

### ステップ 1: 仕様コンテキストのロード
- メタデータとフェーズステータスのために `.kiro/specs/$1/spec.json` を読み込む
- 既存のファイルを読み込む: `requirements.md`, `design.md`, `tasks.md` (存在する場合)
- 利用可能なファイルについて `.kiro/specs/$1/` ディレクトリを確認する

### ステップ 2: ステータス分析

**各フェーズをパースする**:
- **要件**: 要件と受け入れ基準をカウントする
- **設計**: アーキテクチャ、コンポーネント、図を確認する
- **タスク**: 完了 vs 合計タスクをカウントする（`- [x]` vs `- [ ]` をパース）
- **承認**: spec.json 内の承認ステータスを確認する

### ステップ 3: レポート生成

以下の内容を含むレポートを spec.json で指定された言語で作成する:
1. **現在のフェーズ & 進捗**: 仕様がワークフローのどこにあるか
2. **完了ステータス**: 各フェーズの完了率
3. **タスク内訳**: タスクが存在する場合、完了/残りの数を表示する
4. **次のアクション**: 次に何を行う必要があるか
5. **ブロッカー**: 進捗を妨げている問題

## 重要な制約
- spec.json の言語を使用する
- 正確な完了率を計算する
- 具体的な次のアクションコマンドを特定する
</instructions>

## ツールガイダンス
- **Read**: 最初に spec.json をロードし、必要に応じて他の仕様ファイルをロードする
- **Parse carefully**: tasks.md のチェックボックスから完了データを抽出する
- **Glob** を使用してどの仕様ファイルが存在するか確認する

## 出力記述

spec.json で指定された言語でステータスレポートを提供する:

**レポート構造**:
1. **機能概要**: 名前、フェーズ、最終更新
2. **フェーズステータス**: 要件、設計、タスク（完了率付き）
3. **タスク進捗**: タスクが存在する場合、X/Y 完了を表示
4. **次のアクション**: 次に実行する特定のコマンド
5. **問題**: ブロッカーまたは欠落している要素

**フォーマット**: ステータスのための絵文字（✅/⏳/❌）を含む、明確でスキャン可能なフォーマット

## 安全性とフォールバック

### エラーシナリオ

**仕様が見つからない**:
- **メッセージ**: "`$1` の仕様が見つかりません。`.kiro/specs/` で利用可能な仕様を確認してください"
- **アクション**: 利用可能な仕様ディレクトリをリストする

**不完全な仕様**:
- **警告**: どのファイルが欠落しているか特定する
- **提案アクション**: 次のフェーズのコマンドを指し示す

### すべての仕様をリストする

すべての利用可能な仕様を見るには:
- 引数なしかワイルドカードで実行する
- `.kiro/specs/` 内のすべての仕様とそのステータスを表示する

arguments: {{args}}
"""