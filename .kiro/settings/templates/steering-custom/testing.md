# テスト標準

[目的: 何をテストするか、テストの場所、および構造化の方法についてのガイド]

## 哲学
- 実装ではなく振る舞いをテストする
- 高速で信頼性の高いテストを優先する; 壊れやすいモックを最小限にする
- クリティカルパスを深くカバーする; 100%追求よりも幅広さを

## 組織
オプション:
- 共同配置: `component.tsx` + `component.test.tsx`
- 分離: `/src/...` と `/tests/...`
デフォルトとして1つ選択; 根拠のある例外を許可する。

命名:
- ファイル: `*.test.*` または `*.spec.*`
- スイート: テスト対象; ケース: 期待される振る舞い

## テストタイプ
- 単体 (Unit): 単一ユニット、モックされた依存関係、非常に高速
- 統合 (Integration): 複数のユニットを一緒にする、外部のみモック
- E2E: 完全なフロー、最小限のモック、重要なジャーニーのみ

## 構造 (AAA)
```typescript
it('does X when Y', () => {
  // Arrange (準備)
  const input = setup();
  // Act (実行)
  const result = act(input);
  // Assert (検証)
  expect(result).toEqual(expected);
});
```

## モッキング & データ
- 外部（API/DB）をモックする; テスト対象システムを決してモックしない
- ファクトリ/フィクスチャを使用する; テスト間で状態をリセットする
- テストデータを最小限にし、意図を明らかにする

## カバレッジ
- 目標: [全体 %]; 重要なドメインではより高く
- CIで閾値を強制する; 例外にはレビューの根拠が必要

---
_パターンと決定に焦点を当てる。ツール固有の設定は他の場所に置く。_