# 設計レビュープロセス

## 目的
技術設計ドキュメントのインタラクティブな品質レビューを実施し、許容可能なリスクで実装に進める十分な堅牢性があることを確認する。

## レビュー哲学
- **完璧さの追求ではなく、品質保証**
- **重要な焦点**: 最も重要な懸念事項を3つ以内に絞る
- **インタラクティブな対話**: 一方的な評価ではなく、設計者との対話を行う
- **バランスの取れた評価**: 強みと弱みの両方を認識する
- **明確な決定**: 根拠を添えた明確な GO/NO-GO（承認/否認）

## スコープ & 非目標

- スコープ: プロジェクトのコンテキストと標準に照らして設計ドキュメントの品質を評価し、GO/NO-GO を決定する。
- 非目標: 実装レベルの設計、深い技術調査、技術選定の最終決定は行わない。これらは設計フェーズの反復に回す。

## コアレビュー基準

### 1. 既存アーキテクチャとの整合性 (重要)
- 既存のシステム境界およびレイヤーとの統合
- 確立されたアーキテクチャパターンとの一貫性
- 適切な依存方向と結合度の管理
- 現在のモジュール構成との整合性

### 2. 設計の一貫性と標準
- プロジェクトの命名規則とコード標準への準拠
- 一貫したエラー処理とロギング戦略
- 統一された設定と依存関係管理
- 確立されたデータモデリングパターンとの整合性

### 3. 拡張性と保守性
- 将来の要件に対する設計の柔軟性
- 関心の分離と単一責任の明確化
- テスト容易性とデバッグの考慮
- 要件に対して適切な複雑さ

### 4. 型安全性とインターフェース設計
- 適切な型定義とインターフェース契約
- 安全でないパターン（TypeScriptの `any` など）の回避
- 明確なAPI境界とデータ構造
- 入力検証とエラー処理のカバレッジ

## レビュープロセス

### ステップ 1: 分析
統合、保守性、複雑さ、要件充足に影響を与える重要な問題に焦点を当て、すべてのレビュー基準に照らして設計を分析する。

### ステップ 2: 重要な問題を特定する (3つ以内)
各問題について:
```
🔴 **重要な問題 [1-3]**: [短いタイトル]
**懸念**: [具体的な問題]
**影響**: [なぜ重要なのか]
**提案**: [具体的な改善案]
**トレーサビリティ**: [requirements.md の要件ID/セクション]
**証拠**: [設計書のセクション/見出し]
```

### ステップ 3: 強みを認識する
バランスの取れたフィードバックを維持するために、1〜2点の優れた側面を認める。

### ステップ 4: GO/NO-GO の決定
- **GO (承認)**: 重大なアーキテクチャの不整合がなく、要件が満たされ、実装パスが明確で、リスクが許容範囲内である
- **NO-GO (否認)**: 根本的な競合、重要なギャップ、高い失敗リスク、不釣合いな複雑さがある

## トレーサビリティと証拠

- 各重要な問題を、`requirements.md` の関連要件（IDまたはセクション）にリンクする。
- 評価を裏付けるために、設計ドキュメント内の証拠の場所（セクション/見出し、図、または成果物）を引用する。
- 該当する場合は、問題を正当化するためにステアリングコンテキストからの制約を参照する。

## 出力フォーマット

### 設計レビュー要約
全体的な品質と準備状況について2〜3文。

### 重要な問題 (3つ以内)
各問題について: 問題、影響、推奨事項、トレーサビリティ（例: 1.1, 1.2）、証拠（design.mdセクション）。

### 設計の強み
1〜2点のポジティブな側面。

### 最終評価
決定 (GO/NO-GO)、根拠 (1-2文)、次のステップ。

### インタラクティブな議論
設計者の視点、代替案、明確化、必要な変更について議論する。

## 長さと焦点

- 要約: 2〜3文
- 各重要な問題: 合計5〜7行（問題/影響/推奨/トレーサビリティ/証拠を含む）
- 全体のレビュー: 簡潔に保つ（目安400語以内）

## レビューガイドライン

1. **重要な焦点**: 成功に著しく影響する問題のみをフラグ立てする
2. **建設的なトーン**: 批判だけでなく解決策を提供する
3. **インタラクティブなアプローチ**: 一方的な評価ではなく対話を行う
4. **バランスの取れた評価**: 強みと弱みの両方を認識する
5. **明確な決定**: 決定的な GO/NO-GO の推奨を行う
6. **アクション可能なフィードバック**: すべての提案が実装可能であることを確認する

## 最終チェックリスト

- **重要な問題が3つ以内** であり、それぞれに影響と推奨事項が含まれている
- **トレーサビリティ**: 各問題が要件ID/セクションを参照している
- **証拠**: 各問題が設計書の場所を引用している
- **決定**: 明確な根拠と次のステップを伴う GO/NO-GO