# 技術設計のための完全な調査プロセス (Full Discovery Process)

## 目的
技術設計が完全、正確、かつ最新の情報に基づいていることを保証するために、包括的な調査と分析を実施する。

## 調査ステップ

### 1. 要件分析
**要件を技術的ニーズにマッピングする**
- EARSフォーマットからすべての機能要件を抽出する
- 非機能要件（パフォーマンス、セキュリティ、スケーラビリティ）を特定する
- 技術的な制約と依存関係を決定する
- コアとなる技術的課題をリストアップする

### 2. 既存実装の分析
**現在のシステムを理解する** (修正/拡張の場合):
- コードベースの構造とアーキテクチャパターンを分析する
- 再利用可能なコンポーネント、サービス、ユーティリティをマッピングする
- ドメイン境界とデータフローを特定する
- 統合ポイントと依存関係を文書化する
- アプローチを決定する: 拡張 vs リファクタリング vs ラッピング

### 3. 技術調査
**ベストプラクティスとソリューションを調査する**:
- **WebSearchを使用** して以下を見つける:
  - 類似の問題に対する最新のアーキテクチャパターン
  - 技術スタックの業界ベストプラクティス
  - 関連技術の最近の更新や変更
  - 一般的な落とし穴と解決策

- **WebFetchを使用** して以下を分析する:
  - フレームワーク/ライブラリの公式ドキュメント
  - APIリファレンスと使用例
  - 移行ガイドと破壊的変更
  - パフォーマンスベンチマークと比較

### 4. 外部依存関係の調査
**各外部サービス/ライブラリについて**:
- 公式ドキュメントとGitHubリポジトリを検索する
- APIシグネチャと認証方法を確認する
- 既存スタックとのバージョン互換性をチェックする
- レート制限と使用制約を調査する
- コミュニティリソースと既知の問題を見つける
- セキュリティ上の考慮事項を文書化する
- 実装時の調査が必要なギャップを記録する

### 5. アーキテクチャパターンと境界の分析
**アーキテクチャの選択肢を評価する**:
- 関連するパターン（MVC, Clean, Hexagonal, Event-driven）を比較する
- 既存のアーキテクチャおよびステアリング原則との適合性を評価する
- チームの対立を避けるために必要なドメイン境界と所有権の継ぎ目を特定する
- スケーラビリティへの影響と運用上の懸念を考慮する
- 保守性とチームの専門知識を評価する
- 推奨されるパターンと却下された代替案を `research.md` に文書化する

### 6. リスク評価
**技術的リスクを特定する**:
- パフォーマンスのボトルネックとスケーリングの限界
- セキュリティの脆弱性と攻撃ベクトル
- 統合の複雑さと結合度
- 技術的負債の発生 vs 解消
- 知識のギャップとトレーニングの必要性

## 調査ガイドライン

### 検索すべきタイミング
**常に検索するもの**:
- 外部APIドキュメントと更新情報
- 認証/認可のセキュリティベストプラクティス
- 特定されたボトルネックに対するパフォーマンス最適化手法
- 依存関係の最新バージョンと移行パス

**不確実な場合に検索するもの**:
- 特定のユースケースに対するアーキテクチャパターン
- データフォーマット/プロトコルの業界標準
- コンプライアンス要件（GDPR, HIPAAなど）
- 想定される負荷に対するスケーラビリティアプローチ

### 検索戦略
1. 公式ソース（ドキュメント, GitHub）から始める
2. 最近のブログ投稿や記事（過去6ヶ月以内）をチェックする
3. 一般的な問題についてStack Overflowを確認する
4. 類似のオープンソース実装を調査する

## 出力要件
設計決定に影響を与えるすべての発見事項を、共有テンプレートを使用して `research.md` に記録する:
- アーキテクチャ、技術適合性、契約に影響を与える重要な洞察
- 調査中に発見された制約
- 推奨されるアプローチと選択されたアーキテクチャパターン（根拠付き）
- 却下された代替案とトレードオフ（設計決定セクションに文書化）
- コンポーネントとインターフェース契約に情報を提供する更新されたドメイン境界
- リスクと緩和策
- 実装中のさらなる調査が必要なギャップ
